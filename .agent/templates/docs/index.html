<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OIEM Abastible - Documentaci√≥n</title>
    <link rel="stylesheet" href="assets/style.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script>
        // Initialize mermaid early
        window.mermaidReady = new Promise((resolve) => {
            if (typeof mermaid !== 'undefined') {
                mermaid.initialize({ startOnLoad: false });
                resolve(mermaid);
            } else {
                window.addEventListener('load', () => {
                    if (typeof mermaid !== 'undefined') {
                        mermaid.initialize({ startOnLoad: false });
                        resolve(mermaid);
                    } else {
                        resolve(null);
                    }
                });
            }
        });
    </script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h1>üìä OIEM</h1>
                <span class="version" id="version">v0.0</span>
            </div>
            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-section="executive">
                    <span class="icon">üìà</span> Resumen Gerencial
                </a>
                <a href="#" class="nav-item" data-section="kanban">
                    <span class="icon">üìã</span> Tablero Kanban
                </a>
                <a href="#" class="nav-item" data-section="modules">
                    <span class="icon">üì¶</span> M√≥dulos
                </a>
                <a href="#" class="nav-item" data-section="diagrams">
                    <span class="icon">üîÄ</span> Diagramas de Flujo
                </a>
                <a href="#" class="nav-item" data-section="usecases">
                    <span class="icon">üë§</span> Casos de Uso
                </a>
                <a href="#" class="nav-item" data-section="rules">
                    <span class="icon">‚öñÔ∏è</span> Reglas de Negocio
                </a>
                <a href="#" class="nav-item" data-section="changelog">
                    <span class="icon">üìú</span> Changelog
                </a>
            </nav>
            <div class="sidebar-footer">
                <p>√öltima actualizaci√≥n:</p>
                <span id="last-updated">-</span>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Executive Summary Section -->
            <section id="executive" class="section active">
                <header class="section-header">
                    <h2>Resumen Gerencial</h2>
                    <p id="project-description">Cargando...</p>
                </header>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üì¶</div>
                        <div class="stat-info">
                            <span class="stat-value" id="total-modules">0</span>
                            <span class="stat-label">M√≥dulos Totales</span>
                        </div>
                    </div>
                    <div class="stat-card completed">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="completed-modules">0</span>
                            <span class="stat-label">Completados</span>
                        </div>
                    </div>
                    <div class="stat-card pending">
                        <div class="stat-icon">üîÑ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="pending-modules">0</span>
                            <span class="stat-label">Pendientes</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-info">
                            <span class="stat-value" id="progress-percent">0%</span>
                            <span class="stat-label">Progreso General</span>
                        </div>
                    </div>
                </div>

                <div class="progress-bar-container">
                    <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
                </div>

                <div class="executive-grid">
                    <div class="exec-card">
                        <h3>üéØ Estado del Proyecto</h3>
                        <div class="status-indicator" id="project-status">
                            <span class="status-dot green"></span>
                            <span>En Desarrollo Activo</span>
                        </div>
                        <p class="status-note">Sistema operativo con funcionalidades core implementadas</p>
                    </div>
                    <div class="exec-card">
                        <h3>‚ö†Ô∏è Decisiones Pendientes</h3>
                        <span class="big-number" id="pending-decisions">0</span>
                        <p class="status-note">Requieren respuesta de Abastible</p>
                    </div>
                    <div class="exec-card">
                        <h3>üîß Stack Tecnol√≥gico</h3>
                        <div class="stack-grid" id="stack-grid"></div>
                    </div>
                </div>
            </section>

            <!-- Kanban Section -->
            <section id="kanban" class="section">
                <header class="section-header">
                    <h2>Tablero Kanban</h2>
                    <p>Vista de funcionalidades por estado de desarrollo</p>
                </header>
                <div class="kanban-board" id="kanban-board">
                    <!-- Populated by JS -->
                </div>
            </section>

            <!-- Modules Section -->
            <section id="modules" class="section">
                <header class="section-header">
                    <h2>M√≥dulos del Sistema</h2>
                    <div class="filter-bar">
                        <button class="filter-btn active" data-filter="all">Todos</button>
                        <button class="filter-btn" data-filter="completed">Completados</button>
                        <button class="filter-btn" data-filter="in-progress">En Progreso</button>
                        <button class="filter-btn" data-filter="pending">Pendientes</button>
                    </div>
                </header>
                <div class="modules-grid" id="modules-grid"></div>
            </section>

            <!-- Diagrams Section -->
            <section id="diagrams" class="section">
                <header class="section-header">
                    <h2>Diagramas de Flujo</h2>
                    <div class="diagram-selector">
                        <button class="diagram-btn active" data-diagram="data/diagrams/flow-registro.xml">Registro
                            Mensual</button>
                        <button class="diagram-btn" data-diagram="data/diagrams/flow-auditoria.xml">Auditor√≠a</button>
                        <button class="diagram-btn" data-diagram="data/diagrams/flow-reapertura.xml">Reapertura</button>
                        <button class="diagram-btn" data-diagram="data/diagrams/lifecycle-data.xml">Ciclo de
                            Vida</button>
                    </div>
                </header>
                <div class="diagram-container">
                    <canvas id="flow-canvas" width="700" height="900"></canvas>
                </div>
            </section>

            <!-- Data Model Section -->
            <section id="datamodel" class="section">
                <header class="section-header">
                    <h2>üóÑÔ∏è Modelo de Datos</h2>
                    <p>Diagrama Entidad-Relaci√≥n del sistema</p>
                </header>
                <div class="datamodel-container">
                    <div class="datamodel-stats" id="datamodel-stats"></div>
                    <div class="mermaid-container">
                        <div id="mermaid-erd" class="mermaid"></div>
                    </div>
                    <div class="tables-grid" id="tables-grid"></div>
                </div>
            </section>

            <!-- Use Cases Section -->
            <section id="usecases" class="section">
                <header class="section-header">
                    <h2>Casos de Uso por Rol</h2>
                    <div class="diagram-selector">
                        <button class="diagram-btn active"
                            data-diagram="data/diagrams/usecase-admin.xml">Administrador</button>
                        <button class="diagram-btn"
                            data-diagram="data/diagrams/usecase-contratista.xml">Contratista</button>
                        <button class="diagram-btn" data-diagram="data/diagrams/usecase-usuario.xml">Usuario
                            Operativo</button>
                    </div>
                </header>
                <div class="diagram-container">
                    <canvas id="usecase-canvas" width="500" height="700"></canvas>
                </div>
            </section>

            <!-- Changelog Section -->
            <section id="changelog" class="section">
                <header class="section-header">
                    <h2>Historial de Cambios</h2>
                </header>
                <div class="timeline" id="changelog-timeline"></div>
            </section>
            <!-- Business Rules Section -->
            <section id="rules" class="section">
                <header class="section-header">
                    <h2>Reglas de Negocio</h2>
                    <p>Especificaciones y l√≥gicas que rigen el comportamiento del sistema</p>
                </header>
                <div class="rules-container">
                    <div class="rules-table-wrapper">
                        <table class="rules-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>T√≠tulo</th>
                                    <th>Descripci√≥n</th>
                                    <th>Tipo</th>
                                    <th>M√≥dulo</th>
                                </tr>
                            </thead>
                            <tbody id="rules-table-body">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="assets/diagram-renderer.js"></script>
    <script src="assets/app.js"></script>
</body>

</html>